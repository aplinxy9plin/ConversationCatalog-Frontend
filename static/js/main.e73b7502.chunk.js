(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);a(67),a(92);var n=a(0),o=a.n(n),l=a(36),i=a.n(l),r=a(23),c=a.n(r),s=a(9),u=a(10),h=a(12),p=a(11),m=a(13),d=a(14),E=a(1),f=(a(115),a(61)),g=a.n(f),v=a(62),b=a.n(v),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={data:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://conversation-list.herokuapp.com/get_all").then(function(e){return e.json()}).then(function(t){e.setState({data:t})})}},{key:"render",value:function(){var e=this;return o.a.createElement(E.Panel,{id:this.props.id},o.a.createElement(E.PanelHeader,null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0431\u0435\u0441\u0435\u0434"),o.a.createElement(E.List,{style:{marginTop:"10px"}},this.state.data&&this.state.data.map(function(t){return o.a.createElement(E.Cell,{description:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432: ".concat(t.count),id:t._id,"data-to":"this_conv",onClick:function(t){return e.props.chooseConv(t.currentTarget.id)},expandable:!0,before:o.a.createElement("img",{style:{marginRight:"20px"},src:t.photo,width:"40px"})},o.a.createElement("div",null,t.name))})))}}]),t}(o.a.Component),C=a(63),j=a(64),O=a.n(j),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(C.a)({},e.currentTarget.name,e.currentTarget.value))},a.onChooseFile=function(){var e=Object(d.a)(Object(d.a)(a)),t=document.getElementById("add_photo").files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.setState({photo:n.result})},n.onerror=function(e){console.log("Error: ",e)}},a.submit=function(){a.state.name&&a.state.count&&a.state.description&&a.state.category&&a.state.link&&a.state.admin?fetch("https://conversation-list.herokuapp.com/add_conv",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a.state)}).then(function(e){return e.json()}).then(function(e){"ok"===e.type&&a.props.popout(o.a.createElement(E.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0}],onClose:function(){a.props.popout(null),a.props.onStoryChange()}},o.a.createElement("h2",null,"\u0413\u043e\u0442\u043e\u0432\u043e")))}):a.props.popout(o.a.createElement(E.Alert,{actions:[{title:"\u041e\u043a",autoclose:!0,style:"cancel"}],onClose:function(){return a.props.popout(null)}},o.a.createElement("h2",null,"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043d\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f")))},a.state={photo:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(E.Panel,{id:this.props.id},o.a.createElement(E.PanelHeader,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0435\u0441\u0435\u0434\u0443"),o.a.createElement(E.Group,null,o.a.createElement(E.FormLayout,null,o.a.createElement(E.Input,{type:"text",top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",onChange:this.onChange}),o.a.createElement(E.Input,{type:"text",top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432",name:"count",onChange:this.onChange}),o.a.createElement(E.Input,{type:"text",top:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0431\u0435\u0441\u0435\u0434\u0443",name:"link",onChange:this.onChange}),o.a.createElement(E.Input,{type:"text",top:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f",name:"admin",onChange:this.onChange}),o.a.createElement(E.Textarea,{name:"description",top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:this.onChange}),o.a.createElement(E.Select,{onChange:this.onChange,name:"category",top:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},o.a.createElement("option",{value:"\u0417\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u0430"},"\u0417\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u0430"),o.a.createElement("option",{value:"\u0425\u043e\u0431\u0431\u0438"},"\u0425\u043e\u0431\u0431\u0438"),o.a.createElement("option",{value:"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430"},"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430"),o.a.createElement("option",{value:"\u041e\u0431\u0440\u0430\u0437 \u0436\u0438\u0437\u043d\u0438"},"\u041e\u0431\u0440\u0430\u0437 \u0436\u0438\u0437\u043d\u0438"),o.a.createElement("option",{value:"\u0411\u0438\u0437\u043d\u0435\u0441, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"},"\u0411\u0438\u0437\u043d\u0435\u0441, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),o.a.createElement("option",{value:"\u0413\u043e\u0440\u043e\u0434\u0441\u043a\u0438\u0435 \u0431\u0435\u0441\u0435\u0434\u044b"},"\u0413\u043e\u0440\u043e\u0434\u0441\u043a\u0438\u0435 \u0431\u0435\u0441\u0435\u0434\u044b"),o.a.createElement("option",{value:"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0433\u0440\u0443\u043f\u043f\u044b"},"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0433\u0440\u0443\u043f\u043f\u044b"),o.a.createElement("option",{value:"\u041d\u0430\u0443\u043a\u0430 \u0438 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435"},"\u041d\u0430\u0443\u043a\u0430 \u0438 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435")),this.state.photo&&o.a.createElement("center",null,o.a.createElement("img",{width:"20%",src:this.state.photo})),o.a.createElement(E.Button,{onClick:function(){return document.getElementById("add_photo").click()},before:o.a.createElement(O.a,null),size:"xl"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043a\u043e\u043d\u043a\u0443"),o.a.createElement("input",{accept:"image/x-png,image/gif,image/jpeg",onChange:this.onChooseFile,id:"add_photo",type:"file",style:{display:"none"}}),o.a.createElement(E.Button,{onClick:this.submit,level:"commerce",size:"xl"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0435\u0441\u0435\u0434\u0443"))))}}]),t}(o.a.Component),S=a(65),x=a.n(S),P=a(37),w=a.n(P),I=Object(E.platform)(),_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={data:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://conversation-list.herokuapp.com/get?id="+this.props.conv_id).then(function(e){return e.json()}).then(function(t){e.setState({data:t})})}},{key:"render",value:function(){return o.a.createElement(E.Panel,{id:this.props.id},o.a.createElement(E.PanelHeader,{left:o.a.createElement(E.HeaderButton,{onClick:this.props.go,"data-to":"home"},I===E.IOS?o.a.createElement(x.a,null):o.a.createElement(w.a,null))},"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0431\u0435\u0441\u0435\u0434\u0430"),this.state.data&&o.a.createElement(E.Group,null,o.a.createElement(E.List,null,o.a.createElement(E.Cell,{before:o.a.createElement("img",{style:{marginRight:"20px"},width:"50px",src:this.state.data.photo})},this.state.data.name),o.a.createElement(E.Cell,null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432: ",this.state.data.count),o.a.createElement(E.Cell,null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",this.state.data.category),o.a.createElement(E.Cell,{multiline:!0},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",this.state.data.description),o.a.createElement(E.Cell,null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0431\u0435\u0441\u0435\u0434\u0443: ",o.a.createElement("a",{target:"_blank",href:-1!==this.state.data.link.indexOf("https://")?this.state.data.link:"https://"+this.state.data.link},this.state.data.link)),o.a.createElement(E.Cell,null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f: ",o.a.createElement("a",{target:"_blank",href:-1!==this.state.data.admin.indexOf("https://")?this.state.data.admin:"https://"+this.state.data.admin},this.state.data.admin)))))}}]),t}(o.a.Component),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.state={activePanel:"home",fetchedUser:null,activeStory:"all"},a.onStoryChange=a.onStoryChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;c.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),c.a.send("VKWebAppGetUserInfo",{})}},{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story,activePanel:"home"})}},{key:"render",value:function(){var e=this;return o.a.createElement(E.Epic,{activeStory:this.state.activeStory,tabbar:o.a.createElement(E.Tabbar,null,o.a.createElement(E.TabbarItem,{onClick:this.onStoryChange,selected:"all"===this.state.activeStory,"data-story":"all"},o.a.createElement(g.a,null)),o.a.createElement(E.TabbarItem,{onClick:this.onStoryChange,selected:"add"===this.state.activeStory,"data-story":"add"},o.a.createElement(b.a,null)))},o.a.createElement(E.View,{id:"all",activePanel:this.state.activePanel},o.a.createElement(y,{id:"home",chooseConv:function(t){return e.setState({id:t,activePanel:"this_conv"})}}),o.a.createElement(_,{id:"this_conv",go:this.go,conv_id:this.state.id})),o.a.createElement(E.View,{id:"add",activePanel:this.state.activePanel,popout:this.state.popout},o.a.createElement(k,{id:"home",popout:function(t){return e.setState({popout:t})},onStoryChange:function(){return e.setState({activeStory:"all"})},"data-story":"all"})))}}]),t}(o.a.Component);c.a.send("VKWebAppInit",{}),i.a.render(o.a.createElement(T,null),document.getElementById("root"))},66:function(e,t,a){e.exports=a(116)}},[[66,1,2]]]);
//# sourceMappingURL=main.e73b7502.chunk.js.map